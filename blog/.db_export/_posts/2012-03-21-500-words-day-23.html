---
layout: post
status: publish
published: true
title: 500 Words. Day 23.
author:
  display_name: Jonathan Howard
  login: wpuser
  email: howard.jonathan@gmail.com
  url: http://www.staringispolite.com
author_login: wpuser
author_email: howard.jonathan@gmail.com
author_url: http://www.staringispolite.com
excerpt: "Well yesterday was crazy. Unexpectedly, my reaction to the Lolapps layoffs
  made it onto the front page of HackerNews, and stayed there. Same with proggit (reddit
  programming). This was my third time getting this kind of traffic to something I
  did, but the first time it was to a database-driven page, so there were some interesting
  learning experiences.\r\n\r\nThe biggest lesson here was how Rackspace Cloud servers
  perform and scale while they’re under heavy load. "
wordpress_id: 244
wordpress_url: http://staringispolite.com/blog/?p=244
date: '2012-03-21 10:01:34 -0700'
date_gmt: '2012-03-21 17:01:34 -0700'
categories:
- self-improvement
- educational
tags: []
comments:
- id: 47
  author: Ashley Laurel
  author_email: alaurel.writer@gmail.com
  author_url: http://pretty-innovative.com
  date: '2012-03-22 11:24:46 -0700'
  date_gmt: '2012-03-22 18:24:46 -0700'
  content: Go Lolapps team!!
---
<p>Well yesterday was crazy. Unexpectedly, my reaction to the Lolapps layoffs made it onto the front page of HackerNews, and stayed there. Same with proggit (reddit programming). This was my third time getting this kind of traffic to something I did, but the first time it was to a database-driven page, so there were some interesting learning experiences.</p>
<p>The biggest lesson here was how Rackspace Cloud servers perform and scale while they’re under heavy load. <a id="more"></a><a id="more-244"></a>RSC just doesn’t cut it for scaling on-demand. It takes too long to run backups, too long to resize a server, and even longer under heavy load, because your VM itself has to use its own resources to do much of the work. Their service is great, but I’m getting the sense that’s because it has to be, to keep customers when the product isn’t good enough. Back when they were Mosso (I joined in 2005? 2006?) it was exciting to be a part of one of the first cloud computing platforms. And to be fair, Rackspace did scale up to meet the traffic needs with a basically 2-click interface, and even under heavy traffic it never died. The VM just spun up again with more resources, at the same IP, and apache/mysql/etc were still running. That’s pretty awesome. It was just SO SLOW.</p>
<p>This happened twice. I had to keep an eye on the site by refreshing every so often. Or more likely, I’d get an IM from a friend saying the site was down. At first, it looked like WordPress on a 512Mb RSC server could handle the load – I’d put in caching after all, so shouldn’t be that bad! – so I left for work without resizing. 25 minutes later, when I got to work, you couldn’t even load a cached page. So I doubled the size of the server (from 512Mb to 1024Mb, and corresponding jumps in CPU. Disk too, but this wasn’t disk-bound). This worked great for about 10 minutes, then it was down again. This time I learned my lesson and went up to 16x the original, which held for the rest of the day. The problem was each time, the resize process took 10+ minutes, which when you’re on the HackerNews frontpage, could be up to thousands of users not seeing your content (or resorting to the Google cache or pastebin).</p>
<p>Two takeaways:</p>
<ul>
<li>I think you still wouldn't want to scale up too soon. If your DB and web server are the same machine, and it's sized for your normal amount of traffic, you should accept it's going to take your site down once. Wait as long as you can. <strong>If you go down to resize when the post is still new, but starting to gain momentum, I imagine it's easy to get down voted into oblivion</strong> when this first round of people see your site is down (because it's scaling up). But the right thing to do is over-spend for the 12 or so hours you'll need it so that you only ever have to go down once. And when I say "over-spend," we're still only talking about 48 cents an hour for 8gigs of RAM on Rackspace Cloud.</li>
<li><strong>I think Amazon EC2 AMIs would’ve been faster to spin up, but I’m not sure how they handle DNS or VM state by default. </strong>I'd like to test whether you keep the same IP, and all your server processes stay running.</li>
<li>At any rate, to do it right, you would have to anticipate the traffic, have a load balancer already and a separate DB server, then scale up the webs behind the scenes. I’m not trying to pay for all that “just in case” I get a day or two of the Internet firehose pointed at my site. You could also scale way up before you post something you think may be news worthy, just in case. But that's assuming you can predict when and what gets popular, and if you could do that, you're probably already rich and/or famous. But it still might be worth it to move onto EC2 permanently, if their resizing process is fast enough, because Rackspace Cloud is decidedly not.</li>
</ul>
<p>For another thing, my site stats are hilarious now – basically all the graphs look like 0, unless they’re measuring yesterday, so that’s not super helpful. Wordpress’s view count is 17,332 since yesterday morning. Total views on the blog overall are 17615. That pretty much says it all right there. Google Analytics is about the same, though happily, you can more easily change the time scales it considers, so I’ll be leaning on GA more than normal for a few weeks. Thanks for helping me launch my new blog, Internet!</p>
<p>I wish I had taken some more time to clean up the blog a bit more. I’d like to go through and set the right “continue reading…” breaks, so the homepage is more easily skimmable. About 10% of the 17,000 who saw that post also went to the main blog page, which is great. Except that the first two to three screenfulls of it are the same article they just finished reading! In fact, I’m going to break the rules of the experiment a bit, to clean that up right now, since there are still 100 people an hour passing by the site. […Ok, back. That’s better!]. I’m also really glad I took as much time as I did to get the site into the state it is now! Last time I got redditted (reddited?), my site was an embarrassingly incomplete portfolio site from college, and the Internet was kind enough to point that out in many creative ways :) This time, it’s pretty much complete. The only thing not under the redesign is my resume, and I think I want to keep it that way.</p>
<p>It’s interesting to see how many people found me from that post. A few of Lolapps’ players left really touching comments on the post, one even said she was almost in tears reading it. Man, were our players awesome… A reporter from an online magazine also contacted me asking if we had any photos from the #RIPlolapps karaoke party that night. I just got an email from LinkedIn saying 120 people looked at my page “this week” and I’m pretty sure that might as well say “yesterday.” Anyway, all good things. It’s really encouraging to see the game development community come together and help Lolumni get job interviews in the area so quickly.</p>
<p>Also, the Internet was surprisingly civil. Especially HackerNews. There was a couple misunderstood people slamming the company, and a sprinkling of sarcasm (I’d expect nothing less!) but overall there was a surprising amount of sympathy. A lot of people shared stories of their own “never-forget” level layoffs from the game industry, since as I mentioned, it happens in the traditional game industry quite often. Even in terms of blog comment spam, it was really light, just a couple recruiters trying to capitalize for their clearly-not-related companies, and a few outright spam attempts. Go, Internet!</p>
<p>&nbsp;</p>
